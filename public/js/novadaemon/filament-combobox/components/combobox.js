function g({options:o,selected:c,statePath:r,state:d}){return{options:[],selected:[],optionsOriginal:[],selectedOriginal:[],allOptions:[],state:d,statePath:r,searchState:{options:{active:!1,keyword:""},selected:{active:!1,keyword:""}},init:function(){this.allOptions=o,this.prepareInitialData(),this.syncDisplayWithMaster()},prepareInitialData:function(){this.optionsOriginal=[],this.selectedOriginal=[],o.forEach(t=>{let e={value:t.value,label:t.label,highlighted:!1};c.includes(t.value)?this.selectedOriginal.push(e):this.optionsOriginal.push(e)})},syncDisplayWithMaster:function(){if(this.searchState.options.active){let t=this.searchState.options.keyword.toLowerCase();this.options=this.optionsOriginal.filter(e=>e.label.toLowerCase().includes(t))}else this.options=[...this.optionsOriginal];if(this.searchState.selected.active){let t=this.searchState.selected.keyword.toLowerCase();this.selected=this.selectedOriginal.filter(e=>e.label.toLowerCase().includes(t))}else this.selected=[...this.selectedOriginal]},search:function(t,e){console.log("search",t,e),this.searchState[t].keyword=e,this.searchState[t].active=e.length>0,this.syncDisplayWithMaster()},toggleHighlight:function(t,e){this[t][e].highlighted=!this[t][e].highlighted},moveItem:function(t,e,i){let s=e==="options"?"optionsOriginal":"selectedOriginal",l=i==="options"?"optionsOriginal":"selectedOriginal";if(this[l].find(a=>a.value===t.value))return;let h=this[s].find(a=>a.value===t.value);h&&(this[s]=this[s].filter(a=>a.value!==t.value),this[l].push({...h,highlighted:!1}),this.syncDisplayWithMaster(),this.updateState())},moveToRight:function(){this.options.filter(e=>e.highlighted).forEach(e=>{let i=this.optionsOriginal.find(s=>s.value===e.value);i&&this.moveItem(i,"options","selected")})},moveToLeft:function(){this.selected.filter(e=>e.highlighted).forEach(e=>{let i=this.selectedOriginal.find(s=>s.value===e.value);i&&this.moveItem(i,"selected","options")})},moveToRightAll:function(){let t=this.searchState.options.active?this.options:this.optionsOriginal;t.forEach(e=>{let i=this.optionsOriginal.find(s=>s.value===e.value);i&&!this.selectedOriginal.some(s=>s.value===e.value)&&this.selectedOriginal.push({...i,highlighted:!1})}),this.optionsOriginal=this.optionsOriginal.filter(e=>!t.some(i=>i.value===e.value)),this.searchState.options.active||(this.searchState.options.keyword=""),this.syncDisplayWithMaster(),this.updateState()},moveToLeftAll:function(){let t=this.searchState.selected.active?this.selected:this.selectedOriginal;if(t.forEach(e=>{let i=this.selectedOriginal.find(s=>s.value===e.value);i&&!this.optionsOriginal.some(s=>s.value===e.value)&&this.optionsOriginal.push({...i,highlighted:!1})}),this.searchState.selected.active){let e=new Set(t.map(i=>i.value));this.selectedOriginal=this.selectedOriginal.filter(i=>!e.has(i.value))}else this.selectedOriginal=[];this.searchState.selected.active||(this.searchState.selected.keyword=""),this.syncDisplayWithMaster(),this.updateState()},updateState:function(){this.optionsOriginal=[...new Map(this.optionsOriginal.map(e=>[e.value,e])).values()],this.selectedOriginal=[...new Map(this.selectedOriginal.map(e=>[e.value,e])).values()];let t=(e,i)=>{let s=this.allOptions.findIndex(n=>n.value===e.value),l=this.allOptions.findIndex(n=>n.value===i.value);return s-l};this.optionsOriginal.sort(t),this.selectedOriginal.sort(t),this.syncDisplayWithMaster(),this.state=this.selectedOriginal.map(e=>e.value)}}}export{g as default};
